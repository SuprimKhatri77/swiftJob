{% extends "base.html" %}

{% block content %}
<div class="max-w-md mx-auto my-10 p-8 bg-white rounded-xl shadow-xl border border-gray-100">
    <h2 class="text-2xl font-bold text-center text-gray-800 mb-6 pb-2 border-b border-gray-200">Job Application</h2>
    
    <div id="messages-container" style="display: none;">
        {% for message in messages %}
        <div class="p-4 mb-4 {% if message.tags == 'success' %}bg-green-100 text-green-800 border border-green-200{% elif message.tags == 'error' %}bg-red-100 text-red-800 border border-red-200{% else %}bg-blue-100 text-blue-800 border border-blue-200{% endif %} rounded-lg">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    
    <form method="post" enctype="multipart/form-data" id="application-form">
        {% csrf_token %}
        
        <div class="mb-6">
            <label for="{{ form.cover_letter.id_for_label }}" class="block text-gray-700 font-medium mb-2">Cover Letter</label>
            <textarea 
                id="{{ form.cover_letter.id_for_label }}" 
                name="cover_letter" 
                rows="5" 
                class="w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition duration-200 text-gray-700 resize-y"
            >{{ form.cover_letter.value|default:"" }}</textarea>
            <p class="mt-1 text-sm text-gray-500 italic">Please tell us about yourself and explain why you're a great fit for this job.</p>
        </div>
        
        <div class="mb-6">
            <label for="{{ form.resume.id_for_label }}" class="block text-gray-700 font-medium mb-2">Resume</label>
            <div class="border-2 border-dashed border-gray-300 rounded-lg bg-gray-50 px-5 py-6 text-center transition duration-300 hover:border-purple-300">
                <div class="space-y-1">
                    {{ form.resume }}
                    <p class="text-sm text-gray-500">Upload your resume (PDF, DOC, or DOCX)</p>
                </div>
            </div>
        </div>
        
        <button type="submit" class="w-full py-3 px-6 bg-purple-600 text-white font-semibold rounded-lg shadow-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 transition duration-200">
            Submit Application
        </button>
    </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const messagesContainer = document.getElementById('messages-container');
        if (messagesContainer) {
            setTimeout(function() {
                messagesContainer.style.transition = 'opacity 1s ease-out';
                messagesContainer.style.opacity = '0';
                
                setTimeout(function() {
                    messagesContainer.remove();
                }, 1000);
            }, 5000); 
        }
    });
</script>
{% endblock content %}